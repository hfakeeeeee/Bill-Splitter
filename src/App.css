/* ==================== DARK THEME, FULL-SCREEN, NO-SCROLL ==================== */
:root{
  --topbar-h: 56px;
  --bg-0:#0b1020;
  --bg-1:#0f172a;
  --bg-2:#111a2f;
  --text:#e5e7eb;
  --muted:#9aa5b1;
  --border:#1f2a44;
  --brand-1:#6366f1;
  --brand-2:#7c3aed;
  --ok-1:#10b981;
  --ok-2:#059669;
  --danger:#ef4444;
  --radius:14px;
  --shadow-sm:0 2px 12px rgba(0,0,0,.25);
  --shadow-md:0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body,#root{height:100%}
html,body{overflow:hidden} /* không tạo thanh cuộn */
body{
  margin:0;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.15), transparent 60%),
    radial-gradient(1000px 500px at 90% -10%, rgba(124,58,237,.15), transparent 60%),
    var(--bg-0);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* -------- App frame -------- */
.app{height:100dvh;display:flex;flex-direction:column}

/* -------- Topbar -------- */
.topbar{
  flex:0 0 var(--topbar-h);
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 16px;
  background: linear-gradient(135deg, rgba(99,102,241,.25), rgba(124,58,237,.25));
  backdrop-filter:saturate(140%) blur(6px);
  border-bottom:1px solid rgba(255,255,255,.06);
}
.brand{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.2px}
.brand-icon{width:20px;height:20px;color:#c7d2fe}
.top-actions{display:flex;gap:10px}

/* -------- Shell (full height minus topbar) -------- */
.shell{flex:1 1 auto;height:calc(100dvh - var(--topbar-h));padding:12px}
.main-grid{
  display:grid;gap:12px;height:100%;
  grid-template-columns: 1.15fr .85fr; /* trái rộng hơn */
  align-items:stretch;
  overflow:hidden; /* chặn cuộn */
}
.stack{display:flex;flex-direction:column;gap:12px;min-height:0}

/* -------- Cards -------- */
.card{
  background:linear-gradient(180deg, var(--bg-1), var(--bg-2));
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow-sm);
  padding:12px;
  min-height:0;
  display:flex;flex-direction:column;
}
.card-fill{flex:1 1 auto} /* card chiếm phần còn lại của cột */
.card-header{
  display:flex;align-items:center;gap:10px;
  padding-bottom:8px;margin-bottom:10px;
  border-bottom:1px dashed rgba(255,255,255,.06);
}
.card-icon{width:18px;height:18px;color:#a5b4fc}
.card h2{margin:0;font-size:1.02rem;font-weight:700}

/* -------- Forms -------- */
.form-grid{display:grid;gap:10px}
.form-group{display:grid;gap:6px}
.form-group label{font-size:.85rem;color:var(--muted)}
.form-group input,.form-group select{
  height:38px;padding:8px 10px;font-size:.95rem;
  color:var(--text);background:#0d1427;
  border:1.5px solid #1a2542;border-radius:10px;outline:none;
}
.form-group input:focus,.form-group select:focus{
  border-color:#7c8cff;box-shadow:0 0 0 3px rgba(99,102,241,.2);
}

/* Discount badge */
.discount-info{margin-top:6px}
.discount-badge{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 10px;border-radius:10px;
  background:linear-gradient(135deg, rgba(99,102,241,.14), rgba(124,58,237,.12));
  border:1px solid rgba(124,58,237,.25);
}
.discount-badge span{color:#c7c9ff;font-size:.9rem}
.discount-badge strong{color:#fff;font-size:1rem}

/* -------- Buttons -------- */
button{cursor:pointer;color:var(--text)}
.primary,.danger,.ghost{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:10px;border:1px solid transparent;background:transparent;
  font-weight:600;
}
.primary{background:linear-gradient(135deg, var(--brand-1), var(--brand-2));border:none}
.primary:hover{filter:brightness(.98)}
.ghost{border:1px solid var(--border);background:#0d1526}
.ghost:hover{border-color:#2b3a67}
.danger{background:rgba(239,68,68,.14);border:1px solid rgba(239,68,68,.35);color:#fecaca}
.danger:hover{filter:brightness(1.05)}
.circle{
  width:34px;height:34px;display:inline-flex;align-items:center;justify-content:center;
  background:#0d1526;border:1px solid var(--border);border-radius:10px;
}
.circle.ok{background:linear-gradient(135deg, var(--ok-1), var(--ok-2));border:none}
.switch{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;background:#0d1526;border:1px solid var(--border);font-size:.85rem;color:#cbd5e1}
.switch input{accent-color:#818cf8}
.spacer{flex:1}

/* -------- Validation -------- */
.validation{
  display:flex;align-items:center;gap:10px;
  padding:8px 10px;border-radius:10px;margin-bottom:8px;
  background:#0d1526;border:1px solid #263256;color:#cbd5e1
}
.validation.success{border-color:rgba(16,185,129,.45);background:rgba(16,185,129,.12);color:#d1fae5}
.validation.warning{border-color:#9ca3af;background:rgba(234,179,8,.12);color:#fde68a}
.validation.error{border-color:rgba(239,68,68,.45);background:rgba(239,68,68,.12);color:#fecaca}

/* -------- Members (NO SCROLL, AUTO PAGINATION) -------- */
.members-list{
  flex:1 1 auto;
  min-height:0;
  display:grid;
  overflow:hidden; /* không cuộn, để JS phân trang */
}
.member{
  height:200px; /* đồng bộ CARD_H */
  display:flex;flex-direction:column;
  background:#0c1428;border:1px solid #1a2542;border-radius:12px;padding:10px;
}
.member.paid{background:linear-gradient(180deg, rgba(16,185,129,.15), rgba(5,150,105,.12));border-color:rgba(16,185,129,.35)}
.member-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.badge{
  background:linear-gradient(135deg, var(--brand-1), var(--brand-2));
  color:#fff;padding:3px 10px;border-radius:999px;font-weight:700;font-size:.75rem;letter-spacing:.2px
}
.member-actions{display:flex;gap:8px}
.member-form{
  display:grid;
  gap:8px;
  grid-template-columns: 1fr 140px; /* trái linh hoạt, phải cố định */
  align-items: end;                  /* các input thẳng hàng đáy */
}
.member-form .form-group:first-child{
  grid-column: 1 / -1;
}

/* 2) Cho các ô grid có thể shrink để không đẩy tràn */
.member-form > .form-group { 
  min-width: 0;        /* quan trọng nhất */
}
.member-form .form-group input {
  width: 100%;
  min-width: 0;
}

/* 3) Pill “Phải trả” không tràn & co chữ nhẹ khi hẹp */
.price-pill{
  max-width: 100%;
  min-width: 0;
  padding: 0 10px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  font-size: clamp(0.9rem, 0.9vw, 1rem);
}
.price-pill{
  display:flex;align-items:center;justify-content:center;
  height:38px;border-radius:10px;
  background:linear-gradient(135deg, var(--ok-1), var(--ok-2));
  font-weight:800;color:#fff;letter-spacing:.3px;
  min-width: 0;
  white-space: nowrap;
  padding: 0 10px;
  text-align: center;
}
@media (max-width: 980px){ .member-form{grid-template-columns:1fr} }

/* Pager */
.pager{
  display:flex;align-items:center;justify-content:space-between;
  padding-top:8px;margin-top:8px;border-top:1px dashed rgba(255,255,255,.06);
}
.pager-label{color:#cbd5e1;font-size:.9rem}

/* -------- Right Tabs -------- */
.tabs{display:flex;gap:8px;margin-bottom:10px}
.tab{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:#0d1526;font-weight:700;color:#cbd5e1
}
.tab.active{background:linear-gradient(135deg, var(--brand-1), var(--brand-2));border:none;color:#fff}
.panel{display:flex;flex-direction:column;gap:12px;min-height:0;flex:1}
.panel-transfer{min-height:0}

/* Overview */
.progress{position:relative;height:12px;border-radius:999px;background:#0d1526;border:1px solid #1a2542;overflow:hidden}
.progress-lg{height:18px}
.progress-fill{position:absolute;inset:0 0 0 0;width:0;background:linear-gradient(135deg, var(--ok-1), var(--ok-2))}
.progress-label-lg{
  margin-top:8px;
  font-size: clamp(1rem, 1.6vw, 1.25rem);
  font-weight: 800;
  letter-spacing:.3px;
  color:#ffffff;
  text-shadow: 0 1px 0 rgba(0,0,0,.5);
}
.summary{border-top:1px dashed rgba(255,255,255,.06);padding-top:10px;display:grid;gap:6px}
.summary .row{display:flex;justify-content:space-between;gap:8px}
.summary .row span{color:var(--muted)}
.summary .row strong.ok{color:#c0f9de}
.summary .row strong.danger{color:#feb2b2}
.summary .row.total{border-top:1px solid rgba(255,255,255,.06);margin-top:6px;padding-top:8px}

/* Transfer */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width: 980px){ .grid-2{grid-template-columns:1fr} }

.note{color:#cbd5e1}
.qr-frame{
  flex:1 1 auto;min-height:0;
  display:flex;align-items:center;justify-content:center;
  border:1px dashed #334155;border-radius:12px;background:#0d1526;padding:10px;
}
.qr-frame img{display:block;max-width:100%;max-height:100%;height:auto;border-radius:12px;box-shadow:var(--shadow-md)}
.qr-fallback{flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:6px;color:#a5b4fc}

/* Focus */
:where(button, select, input):focus-visible{outline:none;box-shadow:0 0 0 3px rgba(99,102,241,.25)}
::selection{background:rgba(99,102,241,.35)}

/* Responsive grid overall */
@media (max-width: 1180px){ .main-grid{grid-template-columns: 1fr 1fr;} }
@media (max-width: 860px){ .main-grid{grid-template-columns: 1fr;} }
